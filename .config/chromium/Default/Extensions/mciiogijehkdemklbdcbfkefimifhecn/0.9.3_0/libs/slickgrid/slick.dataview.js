(function(H){H.extend(!0,window,{Slick:{Data:{DataView:function(h){function d(a){for(var b=a||0,c=e.length;b<c;b++){a=e[b][v];if(void 0===a)throw"Each data element must implement a unique 'id' property";p[a]=b}}function P(){var a=q?Math.max(1,Math.ceil(A/q)):1;return{pageSize:q,pageNum:w,totalRows:A,totalPages:a}}function X(a,b){B=b;x=a;J=null;if(a){!1===b&&e.reverse();for(var c=0,k=e.length;c<k;++c)e[c].index=c;e.sort(a);!1===b&&e.reverse();p={};d();l()}}function Y(a,b){B=b;J=a;x=null;var c=Object.prototype.toString;
Object.prototype.toString="function"==typeof a?a:function(){return this[a]};!1===b&&e.reverse();e.sort();Object.prototype.toString=c;!1===b&&e.reverse();p={};d();l()}function Z(a){!1===B&&a.reverse();a.sort(x);!1===B&&a.reverse();p={};for(var b=0,c=0;b<a.length||c<e.length;++c)b<a.length&&(c==e.length||0<x(a[b],e[c])!=B)&&e.splice(c,0,a[b++]),p[e[c].id]=c;l()}function K(a){h.groupItemMetadataProvider||(h.groupItemMetadataProvider=new Slick.Data.GroupItemMetadataProvider);D=[];F=[];a=a||[];m=a instanceof
Array?a:[a];for(a=0;a<m.length;a++){var b=m[a]=H.extend(!0,{},ja,m[a]);b.getterIsAFn="function"===typeof b.getter;b.compiledAccumulators=[];for(var c=b.aggregators.length;c--;){var k=b.compiledAccumulators,f=c,t=Q(b.aggregators[c].accumulate),t=new Function("_items","for (var "+t.params[0]+", _i=0, _il=_items.length; _i<_il; _i++) {"+t.params[0]+" = _items[_i]; "+t.body+"}");t.displayName=t.name="compiledAccumulatorLoop";k[f]=t}F[a]={}}l()}function R(){if(!E){E={};for(var a=0,b=r.length;a<b;a++)E[r[a][v]]=
a}}function $(a,b){if(null==a)for(var c=0;c<m.length;c++)F[c]={},m[c].collapsed=b;else F[a]={},m[a].collapsed=b;l()}function L(a,b,c){F[a][b]=m[a].collapsed^c;l()}function aa(a,b){for(var c,k,f=[],t={},g,d=b?b.level+1:0,e=m[d],n=0,h=e.predefinedValues.length;n<h;n++)k=e.predefinedValues[n],c=t[k],c||(c=new Slick.Group,c.value=k,c.level=d,c.groupingKey=(b?b.groupingKey+C:"")+k,f[f.length]=c,t[k]=c);n=0;for(h=a.length;n<h;n++)g=a[n],k=e.getterIsAFn?e.getter(g):g[e.getter],c=t[k],c||(c=new Slick.Group,
c.value=k,c.level=d,c.groupingKey=(b?b.groupingKey+C:"")+k,f[f.length]=c,t[k]=c),c.rows[c.count++]=g;if(d<m.length-1)for(n=0;n<f.length;n++)c=f[n],c.groups=aa(c.rows,c);f.sort(m[d].comparer);return f}function M(a){var b=a.group,c=m[b.level],k=b.level==m.length,f,d=c.aggregators.length;if(!k&&c.aggregateChildGroups)for(f=b.groups.length;f--;)b.groups[f].initialized||M(b.groups[f]);for(;d--;)f=c.aggregators[d],f.init(),!k&&c.aggregateChildGroups?c.compiledAccumulators[d].call(f,b.groups):c.compiledAccumulators[d].call(f,
b.rows),f.storeResult(a);a.initialized=!0}function ba(a,b){b=b||0;for(var c=m[b],k=c.collapsed,f=F[b],d=a.length,g;d--;)if(g=a[d],!g.collapsed||c.aggregateCollapsed){g.groups&&ba(g.groups,b+1);if(c.aggregators.length&&(c.aggregateEmpty||g.rows.length||g.groups&&g.groups.length)){var e=g,S=m[e.level],n=new Slick.GroupTotals;n.group=e;e.totals=n;S.lazyTotalsCalculation||M(n)}g.collapsed=k^f[g.groupingKey];g.title=c.formatter?c.formatter(g):g.value}}function ca(a,b){b=b||0;for(var c=m[b],k=[],f,d=0,
g,e=0,S=a.length;e<S;e++){g=a[e];k[d++]=g;if(!g.collapsed){f=g.groups?ca(g.groups,b+1):g.rows;for(var n=0,h=f.length;n<h;n++)k[d++]=f[n]}g.totals&&c.displayTotalsRow&&(!g.collapsed||c.aggregateCollapsed)&&(k[d++]=g.totals)}return k}function Q(a){a=a.toString().match(/^function[^(]*\(([^)]*)\)\s*{([\s\S]*)}$/);return{params:a[1].split(","),body:a[2]}}function ka(a,b){for(var c=[],k=0,f=0,d=a.length;f<d;f++)z(a[f],b)&&(c[k++]=a[f]);return c}function la(a,b,c){for(var k=[],f=0,d,g=0,e=a.length;g<e;g++)d=
a[g],c[g]?k[f++]=d:z(d,b)&&(k[f++]=d,c[g]=!0);return k}function ma(a,b){for(var c=[],d=0,f,e,g,y=0,h=a.length;y<h;y++)f=a[y],e=f._cf||(f._cf={}),g=e[b],!(g||void 0==g&&(e[b]=z(f,b)))||I&&!T(f,I)||(c[d++]=f);return c}function na(a,b,c){for(var d=[],f=0,e,g,y,h=0,n=a.length;h<n;h++)e=a[h],g=e._cf||(e._cf={}),y=g[b],c[h]?d[f++]=e:!(y||void 0==y&&(g[b]=z(e,b)))||I&&!T(e,I)||(d[f++]=e,c[h]=!0);return d}function da(a){E=null;if(s.isFilterNarrowing!=U.isFilterNarrowing||s.isFilterExpanding!=U.isFilterExpanding)ea=
[];if(z){var b=h.inlineFilters?fa:h.cacheFilters?ma:ka,c=h.inlineFilters?ga:h.cacheFilters?na:la;s.isFilterNarrowing?u=b(u,N):s.isFilterExpanding?u=c(a,N,ea):s.isFilterUnchanged||(u=b(a,N))}else u=q?a:a.concat();q?(u.length<w*q&&(w=Math.floor(u.length/q)),b=u.slice(q*w,q*w+q)):b=u;A=a=u.length;a=b;D=[];m.length&&(D=aa(a),D.length&&(ba(D),a=ca(D)));var b=r,c=a,d,f,e,g=[];d=0;var y=c.length;s&&s.ignoreDiffsBefore&&(d=Math.max(0,Math.min(c.length,s.ignoreDiffsBefore)));s&&s.ignoreDiffsAfter&&(y=Math.min(c.length,
Math.max(0,s.ignoreDiffsAfter)));for(var l=d,n=b.length;l<y;l++)if(l>=n)g[g.length]=l;else if(d=c[l],f=b[l],m.length&&(e=d.__nonDataRow||f.__nonDataRow)&&d.__group!==f.__group||d.__group&&!d.equals(f)||e&&(d.__groupTotals||f.__groupTotals)||d[v]!=f[v]||G&&G[d[v]])g[g.length]=l;r=a;return g}function l(){if(!V){var a=r.length,b=A,c=da(e,z);q&&A<w*q&&(w=Math.max(0,Math.ceil(A/q)-1),c=da(e,z));G=null;U=s;s={};b!=A&&W.notify(P(),null,O);a!=r.length&&ha.notify({previous:a,current:r.length,diff_rows:c},
null,O);0<c.length&&ia.notify({rows:c},null,O)}}var O=this,v="id",e=[],r=[],p={},E=null,z=null,G=null,V=!1,B=!0,J,x,s={},U={},N,u=[],fa,ga,ea=[],I="",T=function(){return!0},ja={getter:null,formatter:null,comparer:function(a,b){return a.value-b.value},predefinedValues:[],aggregators:[],aggregateEmpty:!1,aggregateCollapsed:!1,aggregateChildGroups:!1,collapsed:!1,displayTotalsRow:!0,lazyTotalsCalculation:!1},m=[],D=[],F=[],C=":|:",q=0,w=0,A=0,ha=new Slick.Event,ia=new Slick.Event,W=new Slick.Event;h=
H.extend(!0,{},{groupItemMetadataProvider:null,inlineFilters:!1,cacheFilters:!1},h);H.extend(this,{beginUpdate:function(){V=!0},endUpdate:function(){V=!1;l()},setPagingOptions:function(a){void 0!=a.pageSize&&(w=(q=a.pageSize)?Math.min(w,Math.max(0,Math.ceil(A/q)-1)):0);void 0!=a.pageNum&&(w=Math.min(a.pageNum,Math.max(0,Math.ceil(A/q)-1)));W.notify(P(),null,O);l()},getPagingInfo:P,getItems:function(){return e},setItems:function(a,b){void 0!==b&&(v=b);e=u=a;p={};d();for(var c,k=0,f=e.length;k<f;k++)if(c=
e[k][v],void 0===c||p[c]!==k)throw"Each data element must implement a unique 'id' property";l()},setFilter:function(a){z=a;if(h.inlineFilters){a=Q(z);var b=a.body.replace(/return false\s*([;}]|$)/gi,"{ continue _coreloop; }$1").replace(/return true\s*([;}]|$)/gi,"{ _retval[_idx++] = $item$; continue _coreloop; }$1").replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ($1) { _retval[_idx++] = $item$; }; continue _coreloop; }$2"),b="var _retval = [], _idx = 0; var $item$, $args$ = _args; _coreloop: for (var _i = 0, _il = _items.length; _i < _il; _i++) { $item$ = _items[_i]; $filter$; } return _retval; ".replace(/\$filter\$/gi,
b),b=b.replace(/\$item\$/gi,a.params[0]),b=b.replace(/\$args\$/gi,a.params[1]);a=new Function("_items,_args",b);a.displayName=a.name="compiledFilter";fa=a;a=Q(z);b=a.body.replace(/return false\s*([;}]|$)/gi,"{ continue _coreloop; }$1").replace(/return true\s*([;}]|$)/gi,"{ _cache[_i] = true;_retval[_idx++] = $item$; continue _coreloop; }$1").replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ((_cache[_i] = $1)) { _retval[_idx++] = $item$; }; continue _coreloop; }$2");b="var _retval = [], _idx = 0; var $item$, $args$ = _args; _coreloop: for (var _i = 0, _il = _items.length; _i < _il; _i++) { $item$ = _items[_i]; if (_cache[_i]) { _retval[_idx++] = $item$; continue _coreloop; } $filter$; } return _retval; ".replace(/\$filter\$/gi,
b);b=b.replace(/\$item\$/gi,a.params[0]);b=b.replace(/\$args\$/gi,a.params[1]);a=new Function("_items,_args,_cache",b);a.displayName=a.name="compiledFilterWithCaching";ga=a}l()},sort:X,fastSort:Y,reSort:function(){x?X(x,B):J&&Y(J,B)},setGrouping:K,getGrouping:function(){return m},groupBy:function(a,b,c){null==a?K([]):K({getter:a,formatter:b,comparer:c})},setAggregators:function(a,b){if(!m.length)throw Error("At least one grouping must be specified before calling setAggregators().");m[0].aggregators=
a;m[0].aggregateCollapsed=b;K(m)},collapseAllGroups:function(a){$(a,!0)},expandAllGroups:function(a){$(a,!1)},collapseGroup:function(a){var b=Array.prototype.slice.call(arguments),c=b[0];1==b.length&&-1!=c.indexOf(C)?L(c.split(C).length-1,c,!0):L(b.length-1,b.join(C),!0)},expandGroup:function(a){var b=Array.prototype.slice.call(arguments),c=b[0];1==b.length&&-1!=c.indexOf(C)?L(c.split(C).length-1,c,!1):L(b.length-1,b.join(C),!1)},getGroups:function(){return D},getIdxById:function(a){return p[a]},
getRowById:function(a){R();return E[a]},getItemById:function(a){return e[p[a]]},getItemByIdx:function(a){return e[a]},mapRowsToIds:function(a){for(var b=[],c=0,d=a.length;c<d;c++)a[c]<r.length&&(b[b.length]=r[a[c]][v]);return b},mapIdsToRows:function(a){var b=[];R();for(var c=0,d=a.length;c<d;c++){var f=E[a[c]];null!=f&&(b[b.length]=f)}return b},setRefreshHints:function(a){s=a},setFilterArgs:function(a){N=a},refresh:l,updateItem:function(a,b){if(void 0===p[a]||a!==b[v])throw"Invalid or non-matching id";
e[p[a]]=b;G||(G={});G[a]=!0;l()},insertItem:function(a,b){e.splice(a,0,b);d(a);l()},addItem:function(a){e.push(a);d(e.length-1);l()},addItems:function(a){var b=e.length;Array.prototype.push.apply(e,a);d(b);l()},deleteItem:function(a){var b=p[a];if(void 0===b)throw"Invalid id";delete p[a];e.splice(b,1);d(b);l()},deleteItems:function(a){for(var b=[],c=0,k=a.length;c<k;++c){var f=p[a[c].id];if(void 0===f)throw"Invalid id";b.push(f)}if(b.length){b.sort(function(a,b){return a-b});for(c=b.length-1;0<=c;--c)e.splice(b[c],
1);d(b[0]);l()}},syncGridSelection:function(a,b,c){function d(b){h.join(",")!=b.join(",")&&(h=b,l.notify({grid:a,ids:h},new Slick.EventData,e))}function f(){if(0<h.length){g=!0;var c=e.mapIdsToRows(h);b||d(e.mapRowsToIds(c));a.setSelectedRows(c);g=!1}}var e=this,g,h=e.mapRowsToIds(a.getSelectedRows()),l=new Slick.Event;a.onSelectedRowsChanged.subscribe(function(b,f){if(!g){var l=e.mapRowsToIds(a.getSelectedRows());if(c&&a.getOptions().multiSelect){var m=H.grep(h,function(a){return void 0===e.getRowById(a)});
d(m.concat(l))}else d(l)}});this.onRowsChanged.subscribe(f);this.onRowCountChanged.subscribe(f);return l},syncGridCellCssStyles:function(a,b){function c(a){e={};for(var b in a)e[r[b][v]]=a[b]}function d(){if(e){h=!0;R();var c={},k;for(k in e){var l=E[k];void 0!=l&&(c[l]=e[k])}a.setCellCssStyles(b,c);h=!1}}var e,h;c(a.getCellCssStyles(b));a.onCellCssStylesChanged.subscribe(function(a,d){h||b==d.key&&d.hash&&c(d.hash)});this.onRowsChanged.subscribe(d);this.onRowCountChanged.subscribe(d)},getLength:function(){return r.length},
getItem:function(a){if((a=r[a])&&a.__group&&a.totals&&!a.totals.initialized){var b=m[a.level];b.displayTotalsRow||(M(a.totals),a.title=b.formatter?b.formatter(a):a.value)}else a&&a.__groupTotals&&!a.initialized&&M(a);return a},getItemMetadata:function(a){a=r[a];return void 0===a?null:a.__group?h.groupItemMetadataProvider.getGroupRowMetadata(a):a.__groupTotals?h.groupItemMetadataProvider.getTotalsRowMetadata(a):null},onRowCountChanged:ha,onRowsChanged:ia,onPagingInfoChanged:W,setSearchText:function(a){I=
a},setSearchFunc:function(a){T=a},invalidateFilterCache:function(a){for(var b=0;b<a.length;++b){var c=p[a[b]];void 0!=c&&(e[c]._cf={})}},reSortOne:function(a,b){if(x){var c=p[a];if(void 0!=c){var k=e[c];e.splice(c,1);for(var f=0;f<e.length&&0<x(k,e[f])==B;++f);e.splice(f,0,k);f!=c?(d(Math.min(f,c)),l()):b&&l()}}},reSortNew:function(a){if(x&&!(a>=e.length)){a=e.splice(a,e.length);for(var b=0;b<a.length;++b)a[b].index=b+e.length;return Z(a)}},reSortUpdate:function(a){if(x&&a&&a.length){for(var b=[],
c=[],d=0;d<a.length;++d){var f=p[a[d]];void 0!=f&&(b.push(f),c.push(e[f]))}b.sort(function(a,b){return a-b});for(d=b.length-1;0<=d;--d)e.splice(b[d],1);return Z(c)}},updateIdxById:d,getRows:function(){return r},validateIdxById:function(){for(var a=0,b=e.length;a<b;++a)p[e[a].id]!=a&&alert("idxById wrong")}})},Aggregators:{Avg:function(h){this.field_=h;this.init=function(){this.sum_=this.nonNullCount_=this.count_=0};this.accumulate=function(d){d=d[this.field_];this.count_++;null!=d&&""!==d&&NaN!==
d&&(this.nonNullCount_++,this.sum_+=parseFloat(d))};this.storeResult=function(d){d.avg||(d.avg={});0!=this.nonNullCount_&&(d.avg[this.field_]=this.sum_/this.nonNullCount_)}},Min:function(h){this.field_=h;this.init=function(){this.min_=null};this.accumulate=function(d){d=d[this.field_];null!=d&&""!==d&&NaN!==d&&(null==this.min_||d<this.min_)&&(this.min_=d)};this.storeResult=function(d){d.min||(d.min={});d.min[this.field_]=this.min_}},Max:function(h){this.field_=h;this.init=function(){this.max_=null};
this.accumulate=function(d){d=d[this.field_];null!=d&&""!==d&&NaN!==d&&(null==this.max_||d>this.max_)&&(this.max_=d)};this.storeResult=function(d){d.max||(d.max={});d.max[this.field_]=this.max_}},Sum:function(h){this.field_=h;this.init=function(){this.sum_=null};this.accumulate=function(d){d=d[this.field_];null!=d&&""!==d&&NaN!==d&&(this.sum_+=parseFloat(d))};this.storeResult=function(d){d.sum||(d.sum={});d.sum[this.field_]=this.sum_}}}}}})})(jQuery);
