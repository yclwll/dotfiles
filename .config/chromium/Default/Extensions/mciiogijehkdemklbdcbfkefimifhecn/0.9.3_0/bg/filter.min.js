var dy_taskfilter=function(){function q(){var a=new Date;r=a.getTime();s=a.getDay();a.getDate();h=a.getMonth();k=a.getFullYear();a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);f=a.getTime();t=f+864E5-1}function u(a){return a.replace(/\.match/g,".bmatch").replace(/\*([^\*]+)\*/gi,function(a,c){c&&c.trim().toLowerCase();return"Fd('"+c.trim().toLowerCase()+"')"}).replace(/\{([^\}]+)\}/gi,function(a,c){var e=c?c.trim().toLowerCase():"";if(!0==l[e])throw"dy_taskfilter.recursive_bake: loop of rule detected";
var d=dy_rules.ref_rule(e);if(null==d||void 0==d)throw"dy_taskfilter.recursive_bake: referenced Rule {"+e+"} not found";l[e]=!0;d="("+u(d)+")";delete l[e];return d}).replace(/\[([^\]]+)\]/gi,function(a,c){var e=c?c.trim().toLowerCase():"",d;a:if(d=g[e],void 0!=d)d="function"==typeof d?"new Date("+d()+")":d;else{var f;if(f=e.match(/(\d+)_([a-z]+_ago_?)/)){d=parseInt(f[1]);if(isNaN(d)||0>=d)throw"dy_taskfilter: "+e+", bad number";if(f=g[f[2]]){d="new Date("+f(d)+")";break a}throw"dy_taskfilter: "+e+
", func unsupported";}d=null}if(void 0!=d&&null!=d)return d;d=dy_rules.ref_filter(e);if(void 0==d||null==d)throw"dy_taskfilter.recursive_bake: constant/referenced ext filter ["+e+"] not found";return'"'+d+'"'})}function m(a,b){if(!a||""==a||"true"==a)return"true";!1!=b&&q();var c=null;try{l={},c=u(a)}catch(e){return console.log(e),alert(e),null}return c}function n(a,b,c){function Fd(f){return!0==c?DYTask.get_url_field(b,f):DYTask.get_field(b,f)}function yearof(a){return(new Date(a)).getFullYear()}
function monthof(a){return(new Date(a)).getMonth()}function dateof(a){return(new Date(a)).getDate()}function dayof(a){return(new Date(a)).getDay()}function hourof(a){return(new Date(a)).getHours()}function minuteof(a){return(new Date(a)).getMinutes()}function secondof(a){return(new Date(a)).getSeconds()}function kb(a){return a<<10}function mb(a){return a<<20}
function gb(a){return a<<30}function sec(a){return 1E3*a}function min(a){return 6E4*a}function hr(a){return 36E5*a}function hour(a){return 36E5*a};var r=!1;try{r=eval(a)}catch(e){console.log(e),alert("dy_taskfilter: Bad Expression!!")}return r}String.prototype.bmatch=function(a){return null!=
this.match(a)};String.prototype.is=function(a){return RegExp("^("+a+")$").test(this)};String.prototype.has=function(a){return RegExp(a).test(this)};String.prototype.beginwith=function(a){return RegExp("^("+a+")").test(this)};String.prototype.endwith=function(a){return RegExp("("+a+")$").test(this)};Date.prototype.is=function(a){var b=g[a],c=g[a+"_"];if(null!=b&&null!=c)return"function"==typeof b&&(b=b()),"function"==typeof c&&(c=c()),this.getTime()>=b&&this.getTime()<=c;if(c=a.match(/(\d+)_([a-z]+)_ago/)){var e=
parseInt(c[1]);if(isNaN(e)||0>=e)return console.log("dy_taskfilter: "+a+", bad number"),!1;b=g[c[2]+"_ago"];c=g[c[2]+"_ago_"];if(b&&c)return b=b(e),c=c(e),this.getTime()>=b&&this.getTime()<=c}console.log("datetime.is, fail to recognize the parameter");return!1};Date.prototype.btwn=function(a,b){"string"==typeof a&&(a=Date.parse(a));"string"==typeof b&&(b=Date.parse(b));return this.getTime()>a&&this.getTime()<b};Date.prototype._btwn=function(a,b){"string"==typeof a&&(a=Date.parse(a));"string"==typeof b&&
(b=Date.parse(b));return this.getTime()>=a&&this.getTime()<b};Date.prototype.btwn_=function(a,b){"string"==typeof a&&(a=Date.parse(a));"string"==typeof b&&(b=Date.parse(b));return this.getTime()>a&&this.getTime()<=b};Date.prototype._btwn_=function(a,b){"string"==typeof a&&(a=Date.parse(a));"string"==typeof b&&(b=Date.parse(b));return this.getTime()>=a&&this.getTime()<=b};Date.prototype.b4=function(a){"string"==typeof a&&(a=Date.parse(a));return this.getTime()<a};Date.prototype.b4_=function(a){"string"==
typeof a&&(a=Date.parse(a));return this.getTime()<=a};Date.prototype.aft=function(a){"string"==typeof a&&(a=Date.parse(a));return this.getTime()>a};Date.prototype.aft_=function(a){"string"==typeof a&&(a=Date.parse(a));return this.getTime()>=a};var s=0,h=0,k=0,r=0,f=0,t=0,g={mon:1,tue:2,wed:3,thu:4,fri:5,sat:6,sun:0,download:DyEnums.TaskState.DOWNLOAD,inqueue:DyEnums.TaskState.QUEUE,paused:DyEnums.TaskState.PAUSE,finished:DyEnums.TaskState.FINISH,interrupted:DyEnums.TaskState.INTERRUPTED,now:function(){return r},
today:function(){return f},today_:function(){return t},yesterday:function(){return f-864E5},yesterday_:function(){return f-1},this_week:function(){return f-864E5*s},this_week_:function(){return g.this_week()+6048E5-1},last_week:function(){return g.this_week()-6048E5},last_week_:function(){return g.this_week()-1},this_month:function(){var a=new Date(f);a.setDate(1);return a.getTime()},this_month_:function(){var a=new Date(f);a.setMonth(h+1);a.setDate(1);return a.getTime()-1},last_month:function(){var a=
new Date(f);a.setMonth(h-1);a.setDate(1);return a.getTime()},last_month_:function(){return g.this_month()-1},this_year:function(){var a=new Date(f);a.setMonth(0);a.setDate(1);return a.getTime()},this_year_:function(){var a=new Date(f);a.setYear(k+1);a.setMonth(0);a.setDate(1);return a.getTime()-1},last_year:function(){var a=new Date(f);a.setYear(k-1);a.setMonth(0);a.setDate(1);return a.getTime()},last_year_:function(){return g.this_year()-1},days_ago:function(a){return f-864E5*a},days_ago_:function(a){return f-
864E5*(a-1)-1},weeks_ago:function(a){return g.this_week()-6048E5*a},weeks_ago_:function(a){return g.this_week()-6048E5*(a-1)-1},months_ago:function(a){var b=new Date(g.this_month());b.setMonth(h-a);return b.getTime()},months_ago_:function(a){return g.months_ago(a-1)-1},years_ago:function(a){var b=new Date(g.this_year());b.setFullYear(k-a);return b.getTime()},years_ago_:function(a){return g.years_ago(a-1)-1}};q();var p="true",l={};return{getCompiledFilter:function(){return p},compiledTest:function(a,
b){return a.recycled?!1:n(p,a)},testOnce:function(a,b,c){return(b=m(b,c))?n(b,a,!1):!1},compileCache:function(a,b){var c=m(a,b);return c?(p=c,!0):!1},compile:m,testWith:n}}();
